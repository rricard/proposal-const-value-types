<!DOCTYPE html>
<meta charset="utf8" />
<emu-clause id="sec-ecmascript-data-types-and-values" aoid="Type">
  <h1>ECMAScript Data Types and Values</h1>
  <emu-clause id="sec-ecmascript-language-types">
    <h1>ECMAScript Language Types</h1>

    <emu-clause id="sec-ecmascript-language-types-record-type">
      <h1>The Record Type</h1>
      <p>The Record type is the set of all finite mappings from Strings to ECMAScript primitive values including Record and Tuple. Each record value holds an associated [[Fields]] List value which is a list of pairs of the form { [[Key]], [[Value]] } where the [[Key]] is a String and [[Value]] is any primitive value. Entries of [[Fields]] are sorted by [[Key]] in code unit order. The [[Fields]] List and its entries are never modified.</p>

      <emu-clause id="sec-immutable-types-record-tostring">
        <h1>RecordToString ( _argument_ )</h1>
        <p>The abstract operation RecordToString takes argument _argument_ (a Record) and convertes _argument_ to a String. It performs the following steps when called:</p>
        <emu-alg>
            1. Assert: Type(_argument_) is Record.
            1. Let _list_ be _argument_.[[Fields]].
            1. Let _length_ be the length of List _list_.
            1. Let _ret_ be the value *"#{"*.
            1. Let _k_ be 0.
            1. Repeat, while _k_ &lt; _len_,
              1. Let _entry_ be _list_[_k_].
              1. Let _key_ be _entry_.[[Key]]
              1. Let _value_ be _entry_.[[Value]].
              1. If Type(_value_) is Symbol, Let _valueString_ be ! SymbolDescriptiveString(_value_).
              1. Else, Let _valueString_ be ? ToString(_value_).
              1. Set _ret_ to be the string-concatenation _ret_ and *" \""*.
              1. Set _ret_ to be the string-concatenation _ret_ and _key_.
              1. Set _ret_ to be the string-concatenation _ret_ and *": "*.
              1. Set _ret_ to be the string-concatenation _ret_ and _valueString_.
              1. If _k_ = _len_ - 1, Set _ret_ to be the string-concatenation _ret_ and *" "*.
              1. Else, Set _ret_ to be the string-concatenation _ret_ and *", "*.
              1. Set _k_ to _k_ + 1.
            1. Set _ret_ to be the string-concatenation _ret_ and *"}"*.
            1. Return _ret_.
        </emu-alg>
      </emu-clause>

      <emu-clause id="sec-immutable-types-record-equal">
        <h1>RecordEqual ( _x_, _y_, _elementEqual_ )</h1>
        <p>The abstract operation RecordEqual takes arguments _x_ (a Record), _y_ (a Record), and _elementEqual_ (an Abstract Closure). It performs the following steps when called:</p>
        <emu-alg>
          1. Let _xList_ be _x_.[[Fields]].
          1. Let _yList_ be _y_.[[Fields]].
          1. Let _xLen_ be the length of List _xList_.
          1. Let _yLen_ be the length of List _yList_.
          1. If _xLen_ &ne; _yLen_, return *false*.
          1. Let _k_ be 0.
          1. Repeat, while _k_ &lt; _xLen_,
            1. Let _xField_ be _xList_[_k_].
            1. Let _yField_ be _yList_[_k_].
            1. Let _xKey_ be _xField_.[[Key]].
            1. Let _yKey_ be _yField_.[[Key]].
            1. Let _xValue_ be _xField_.[[Value]].
            1. Let _yValue_ be _yField_.[[Value]].
            1. If ! SameValueNonGeneric(_xKey_, _yKey_) is *false*, Return *false*.
            1. If ! _elementEqual_(_xValue_, _yValue_) is *false*, Return *false*.
            1. Set _k_ to _k_ + 1.
          1. Return *true*.
        </emu-alg>
      </emu-clause>

      <emu-clause id="sec-immutable-types-record-sameValue">
        <h1>RecordSameValue ( _x_, _y_ )</h1>
        <p>The abstract operation RecordSameValue takes arguments _x_ (a Record) and _y_ (a Record). It performs the following steps when called:</p>
        <emu-alg>
          1. Let _elementEqual_ be a new Abstract Closure with parameters (_elementX_, _elementY_) that captures no values and performs the following steps when called:
            1. Return ! SameValue(_elementX_, _elementY_).
          1. Return ! RecordEqual(_x_, _y_, _elementEqual_).
        </emu-alg>
      </emu-clause>

      <emu-clause id="sec-immutable-types-record-sameValueZero">
        <h1>RecordSameValueZero ( _x_, _y_ )</h1>
        <p>The abstract operation RecordSameValueZero takes arguments _x_ (a Record) and _y_ (a Record). It performs the following steps when called:</p>
        <emu-alg>
          1. Let _elementEqual_ be a new Abstract Closure with parameters (_elementX_, _elementY_) that captures no values and performs the following steps when called:
            1. Return ! SameValueZero(_elementX_, _elementY_).
          1. Return ! RecordEqual(_x_, _y_, _elementEqual_).
        </emu-alg>
      </emu-clause>
    </emu-clause>


    <emu-clause id="sec-ecmascript-language-types-tuple-type">
      <h1>The Tuple Type</h1>
      <p>The Tuple type is the set of all finite and ordered sequences of ECMAScript primitive values including Record and Tuple. Each tuple value holds an associated [[Sequence]] List which is a list of primitive values. The [[Sequence]] List is integer-indexed. The [[Sequence]] List and its values are never modified.</p>

      <emu-clause id="sec-immutable-types-tuple-tostring">
        <h1>TupleToString ( _argument_ )</h1>
        <p>The abstract operation TupleToString takes argument _argument_ (a Tuple). It performs the following steps when called:</p>
        <emu-alg>
            1. Assert: Type(_argument_) is Tuple.
            1. Let _list_ be _argument_.[[Sequence]].
            1. Let _length_ be the length of List _list_.
            1. Let _ret_ be the value *"#["*.
            1. Let _k_ be 0.
            1. Repeat, while _k_ &lt; _len_,
              1. Let _value_ be _list_[_k_].
              1. If Type(_value_) is Symbol, Let _valueString_ be ! SymbolDescriptiveString(_value_).
              1. Else, Let _valueString_ be ? ToString(_value_).
              1. Set _ret_ to be the string-concatenation _ret_ and _valueString_.
              1. If _k_ &lt; _len_, Set _ret_ to be the string-concatenation _ret_ and *", "*.
              1. Set _k_ to _k_ + 1.
            1. Set _ret_ to be the string-concatenation _ret_ and *"]"*.
            1. Return _ret_.
        </emu-alg>
      </emu-clause>

      <emu-clause id="sec-immutable-types-tuple-equal">
        <h1>TupleEqual ( _x_, _y_, _elementEqual_ )</h1>
        <p>The abstract operation TupleEqual takes arguments _x_ (a Tuple), _y_ (a Tuple), and _elementEqual_ (an Abstract Closure). It performs the following steps when called:</p>
        <emu-alg>
          1. Let _xList_ be _x_.[[Sequence]].
          1. Let _yList_ be _y_.[[Sequence]].
          1. Let _xLen_ be the length of List _xList_.
          1. Let _yLen_ be the length of List _yList_.
          1. If _xLen_ &ne; _yLen_, Return *false*.
          1. Let _k_ be 0.
          1. Repeat, while _k_ &lt; _xLen_,
            1. Let _xItem_ be _xList_[_k_].
            1. Let _yItem_ be _yList_[_k_].
            1. If ! _elementEqual_(_xValue_, _yValue_) is *false*, Return *false*.
            1. Set _k_ to _k_ + 1.
          1. Return *true*.
        </emu-alg>
    </emu-clause>

    <emu-clause id="sec-immutable-types-tuple-sameValue">
        <h1>TupleSameValue ( _x_, _y_ )</h1>
        <p>The abstract operation TupleSameValue takes arguments _x_ (a Tuple) and _y_ (a Tuple). It performs the following steps when called:</p>
        <emu-alg>
          1. Let _elementEqual_ be a new Abstract Closure with parameters (_elementX_, _elementY_) that captures no values and performs the following steps when called:
            1. Return ! SameValue(_elementX_, _elementY_).
          1. Return ! TupleEqual(_x_, _y_, _elementEqual_).
        </emu-alg>
      </emu-clause>

      <emu-clause id="sec-immutable-types-tuple-sameValueZero">
        <h1>TupleSameValueZero ( _x_, _y_ )</h1>
        <p>The abstract operation TupleSameValueZero takes arguments _x_ (a Tuple) and _y_ (a Tuple). It performs the following steps when called:</p>
        <emu-alg>
          1. Let _elementEqual_ be a new Abstract Closure with parameters (_elementX_, _elementY_) that captures no values and performs the following steps when called:
            1. Return ! SameValueZero(_elementX_, _elementY_).
          1. Return ! TupleEqual(_x_, _y_, _elementEqual_).
        </emu-alg>
      </emu-clause>
    </emu-clause>
  </emu-clause>
</emu-clause>
